<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç´ æ•°è¨ˆç®—OSã¨è§£ææ•°è«–ã®å¾“æ¥åˆ°é”ç‚¹ (2025)</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <!-- MathJax Configuration: Enable $ as inline delimiter -->
    <script>
        window.MathJax = {
            tex: {
                inlineMath: [['$', '$'], ['\\(', '\\)']],
                displayMath: [['$$', '$$'], ['\\[', '\\]']]
            },
            options: {
                ignoreHtmlClass: 'tex2jax_ignore',
                processHtmlClass: 'tex2jax_process'
            }
        };
    </script>
    <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" async></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Serif+JP:wght@400;700&family=Noto+Sans+JP:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Noto Sans JP', sans-serif; background-color: #F9FAFB; color: #1F2937; }
        h1, h2, h3, .serif { font-family: 'Noto Serif JP', serif; }
        
        /* Responsive Chart Container */
        .chart-container { 
            position: relative; 
            width: 100%; 
            max-width: 800px; 
            margin-left: auto; 
            margin-right: auto; 
            /* Mobile height (compact) */
            height: 250px; 
            max-height: 400px; 
        }
        @media (min-width: 768px) {
            .chart-container {
                /* Desktop height */
                height: 350px; 
            }
        }

        .card-hover:hover { transform: translateY(-2px); box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05); }
        .transition-all { transition-property: all; transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1); transition-duration: 300ms; }
        
        /* Tab Styling */
        .active-tab { border-bottom: 2px solid #0F766E; color: #0F766E; font-weight: 700; background-color: rgba(15, 118, 110, 0.05); }
        .inactive-tab { color: #6B7280; border-bottom: 2px solid transparent; }
        .inactive-tab:hover { color: #374151; background-color: #F3F4F6; }

        /* Hide scrollbar for clean horizontal scrolling */
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        
        /* Reference Highlight Animation */
        @keyframes highlight-pulse {
            0% { background-color: #FEF3C7; transform: scale(1.02); border-color: #F59E0B; }
            50% { background-color: #FEF3C7; transform: scale(1.02); border-color: #F59E0B; }
            100% { background-color: white; transform: scale(1); border-color: #E5E7EB; }
        }
        .highlight-ref {
            animation: highlight-pulse 2s ease-out;
        }
        /* Smooth scrolling adjustment for fixed header */
        html { scroll-padding-top: 80px; }
    </style>
</head>
<body class="antialiased min-h-screen flex flex-col">

    <!-- Header / Hero -->
    <header class="bg-white border-b border-gray-200 sticky top-0 z-50 shadow-sm">
        <div class="max-w-6xl mx-auto px-4 sm:px-6 lg:px-8 h-16 flex items-center justify-between">
            <div class="flex items-center gap-2">
                <div class="w-8 h-8 bg-teal-700 rounded-lg flex items-center justify-center text-white font-bold text-lg serif flex-shrink-0">P</div>
                <span class="font-bold text-gray-800 tracking-tight text-sm md:text-base">ç´ æ•°è¨ˆç®—OS Report</span>
            </div>
            <nav class="flex gap-4 text-sm font-medium text-gray-600 items-center">
                <a href="#analysis" class="hidden md:block hover:text-teal-700 transition">ç ”ç©¶ãƒãƒƒãƒ—</a>
                <a href="https://ghostdrifttheory.github.io/prime-counter-demo/" target="_blank" class="text-teal-700 font-bold hover:text-teal-900 transition flex items-center gap-1 bg-teal-50 px-3 py-1.5 rounded-full">
                    Demo <span class="text-xs">â†—</span>
                </a>
            </nav>
        </div>
    </header>

    <main class="flex-grow">
        <!-- Intro Section -->
        <section class="py-10 md:py-16 bg-gradient-to-b from-gray-50 to-white">
            <div class="max-w-4xl mx-auto px-4 text-center">
                <div class="inline-block px-3 py-1 mb-4 text-xs font-semibold tracking-wider text-teal-800 uppercase bg-teal-100 rounded-full">
                    2025å¹´ è§£ææ•°è«–ãƒ¬ãƒãƒ¼ãƒˆ
                </div>
                <h1 class="text-2xl md:text-5xl font-bold text-gray-900 mb-6 leading-snug serif">
                    ç´ æ•°è¨ˆç®—OSã¨<br class="md:hidden">è§£ææ•°è«–ã®å¾“æ¥åˆ°é”ç‚¹<br>
                    <span class="text-teal-700 text-xl md:text-4xl italic block mt-3 font-normal">æ˜ç¤ºå…¬å¼ã‹ã‚‰æœ‰é™é–‰åŒ…ã¸</span>
                </h1>
                <p class="text-sm md:text-lg text-gray-600 mb-8 max-w-2xl mx-auto leading-relaxed px-2">
                    2020å¹´ã‹ã‚‰2025å¹´ã«ã‹ã‘ã¦ã€Chebyshevé–¢æ•° $\psi(x)$ ã‚„ $\pi(x)$ ã®èª¤å·®è©•ä¾¡ã¯åŠ‡çš„ã«æ”¹å–„ã•ã‚Œã¾ã—ãŸã€‚ã—ã‹ã—ã€ã“ã‚Œã‚‰ã¯ä¾ç„¶ã¨ã—ã¦ã€Œç„¡é™ã€ã®å¯„ä¸ã‚’ä¸ç­‰å¼ã§æŠ‘ãˆè¾¼ã‚€æ‰‹æ³•ã§ã™ã€‚æœ¬ãƒ¬ãƒãƒ¼ãƒˆã§ã¯ã€æœ€æ–°ã®åˆ°é”ç‚¹ã‚’æ•´ç†ã—ã€ãã‚Œã‚‰ãŒæŠ±ãˆã‚‹æ§‹é€ çš„é™ç•Œã¨ã€ãã‚Œã‚’çªç ´ã™ã‚‹ã€Œæœ‰é™é–‰åŒ… (Finite Closure)ã€ã‚¢ãƒ—ãƒ­ãƒ¼ãƒã‚’å¯¾æ¯”ã—ã¾ã™ã€‚
                </p>
                
                <div class="flex flex-col sm:flex-row justify-center items-center gap-3">
                    <!-- Primary Action: Live Demo -->
                    <a href="https://ghostdrifttheory.github.io/prime-counter-demo/" target="_blank" class="w-full sm:w-auto px-8 py-3 bg-gradient-to-r from-teal-600 to-emerald-600 text-white font-bold rounded-lg hover:from-teal-700 hover:to-emerald-700 transition shadow-lg shadow-teal-600/20 flex items-center justify-center gap-2 transform hover:-translate-y-0.5 group">
                        <span>Live Demoã‚’è©¦ã™</span>
                        <svg class="w-4 h-4 transition-transform group-hover:translate-x-1" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path></svg>
                    </a>
                    
                    <!-- Secondary Actions -->
                    <div class="flex gap-3 w-full sm:w-auto">
                        <button onclick="document.getElementById('analysis').scrollIntoView({behavior: 'smooth'})" class="flex-1 sm:flex-none px-4 py-3 bg-white text-gray-700 font-medium rounded-lg border border-gray-300 hover:bg-gray-50 transition text-sm">
                            è§£æãƒãƒƒãƒ—
                        </button>
                        <button onclick="document.getElementById('concept').scrollIntoView({behavior: 'smooth'})" class="flex-1 sm:flex-none px-4 py-3 bg-white text-gray-700 font-medium rounded-lg border border-gray-300 hover:bg-gray-50 transition text-sm">
                            æ¦‚å¿µå›³è§£
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Concept Visualization Section -->
        <section id="concept" class="py-10 bg-white border-y border-gray-100">
            <div class="max-w-6xl mx-auto px-4">
                <div class="grid md:grid-cols-3 gap-8 items-center">
                    <div class="md:col-span-1">
                        <h2 class="text-xl md:text-2xl font-bold text-gray-900 mb-4 serif flex items-center gap-2">
                            <span class="bg-gray-100 w-8 h-8 rounded-full flex items-center justify-center text-sm">A</span>
                            ç„¡é™ã®éœ§ vs æœ‰é™ã®çª“
                        </h2>
                        <p class="text-gray-600 mb-6 text-sm leading-relaxed">
                            å¾“æ¥ã®æ˜ç¤ºå…¬å¼ï¼ˆBeforeï¼‰ã§ã¯ã€ç„¡é™é ã‹ã‚‰ã®ã€Œæ³¢ã€ã®å¹²æ¸‰ï¼ˆèª¤å·®ï¼‰ãŒæ®‹ã‚Šç¶šã‘ã€ä¸ç­‰å¼ $|\psi(x)-x| < \epsilon$ ã§ã—ã‹è©•ä¾¡ã§ãã¾ã›ã‚“ã€‚
                            <br><br>
                            ä¸€æ–¹ã€ç´ æ•°è¨ˆç®—OSï¼ˆAfterï¼‰ã¯<strong>Yukawaçª“é–¢æ•°</strong>ã‚’ç”¨ã„ã¦åŒºé–“å¤–ã®å¯„ä¸ã‚’æœ‰é™å€‹ã®æœ‰ç†ãƒã‚¦ãƒ³ãƒ‰ã«å¸åã—ã€å®Ÿè³ªçš„ã«åˆ‡ã‚Šè½ã¨ã—ã¾ã™ã€‚
                        </p>
                        
                        <!-- Interaction Controls -->
                        <div class="bg-gray-50 p-4 rounded-xl border border-gray-200 space-y-4">
                            <div>
                                <label class="block text-xs font-semibold text-gray-500 uppercase mb-2">è¡¨ç¤ºãƒ¢ãƒ¼ãƒ‰</label>
                                <div class="flex bg-white rounded-lg p-1 border border-gray-200 shadow-sm">
                                    <button id="btn-mode-classic" class="flex-1 py-2 text-xs md:text-sm font-medium rounded transition-colors bg-gray-100 text-gray-800" onclick="setChartMode('classic')">
                                        å¾“æ¥ (ä¸ç­‰å¼)
                                    </button>
                                    <button id="btn-mode-os" class="flex-1 py-2 text-xs md:text-sm font-medium rounded transition-colors text-gray-500 hover:text-gray-800" onclick="setChartMode('os')">
                                        OS (æœ‰é™é–‰åŒ…)
                                    </button>
                                </div>
                            </div>
                            <div>
                                <label class="block text-xs font-semibold text-gray-500 uppercase mb-2">é›¶ç‚¹ã®é …æ•° (è¿‘ä¼¼ç²¾åº¦)</label>
                                <input type="range" id="term-slider" min="10" max="200" value="50" class="w-full accent-teal-700 cursor-pointer" oninput="updateChartTerms(this.value)">
                                <div class="flex justify-between text-xs text-gray-400 mt-1">
                                    <span>ç–</span>
                                    <span id="term-count-display">50é …</span>
                                    <span>å¯†</span>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Chart Container -->
                    <div class="md:col-span-2 bg-gray-50 rounded-2xl p-2 md:p-4 border border-gray-200 shadow-inner">
                        <div class="chart-container">
                            <canvas id="conceptChart"></canvas>
                        </div>
                        <div id="chart-caption" class="text-center mt-3 text-xs md:text-sm font-bold text-gray-700 px-2">
                            å¾“æ¥ã®æ˜ç¤ºå…¬å¼ï¼šç„¡é™é ã®ãƒã‚¤ã‚ºãŒæ®‹ç•™ã™ã‚‹
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Analysis Matrix Section -->
        <section id="analysis" class="py-12 bg-gray-50">
            <div class="max-w-6xl mx-auto px-4">
                <div class="mb-8 text-center md:text-left">
                    <h2 class="text-xl md:text-3xl font-bold text-gray-900 serif mb-3 flex items-center justify-center md:justify-start gap-2">
                        <span class="bg-teal-100 text-teal-800 w-8 h-8 rounded-full flex items-center justify-center text-sm font-sans">B</span>
                        ç ”ç©¶ãƒãƒƒãƒ—ï¼šåˆ°é”ç‚¹ã¨çªç ´å£
                    </h2>
                    <p class="text-sm text-gray-600 max-w-3xl mx-auto md:mx-0">
                        ä»¥ä¸‹ã®5é ˜åŸŸã«ãŠã‘ã‚‹ã€2025å¹´ã®æœ€å…ˆç«¯æˆæœã¨ç´ æ•°è¨ˆç®—OSã®ãƒ‘ãƒ©ãƒ€ã‚¤ãƒ ã‚·ãƒ•ãƒˆã®æ¯”è¼ƒã€‚
                    </p>
                </div>

                <!-- Tabs (Horizontal Scroll for Mobile) -->
                <div class="relative mb-6">
                    <div class="flex overflow-x-auto pb-2 gap-2 md:gap-4 border-b border-gray-200 no-scrollbar whitespace-nowrap mask-linear-fade" id="tab-container">
                        <button onclick="switchTab('explicit')" id="tab-explicit" class="px-4 py-2 rounded-t-lg text-sm md:text-base transition active-tab flex-shrink-0">â‘  æ˜ç¤ºå…¬å¼</button>
                        <button onclick="switchTab('intervals')" id="tab-intervals" class="px-4 py-2 rounded-t-lg text-sm md:text-base transition inactive-tab flex-shrink-0">â‘¡ çŸ­åŒºé–“ãƒ»å¹³å‡å€¤</button>
                        <button onclick="switchTab('zeros')" id="tab-zeros" class="px-4 py-2 rounded-t-lg text-sm md:text-base transition inactive-tab flex-shrink-0">â‘¢ $\zeta$é›¶ç‚¹ãƒ»RH</button>
                        <button onclick="switchTab('computation')" id="tab-computation" class="px-4 py-2 rounded-t-lg text-sm md:text-base transition inactive-tab flex-shrink-0">â‘£ $\pi(x)$ å®Ÿè£…</button>
                        <button onclick="switchTab('unconditional')" id="tab-unconditional" class="px-4 py-2 rounded-t-lg text-sm md:text-base transition inactive-tab flex-shrink-0">â‘¤ éRHä¾å­˜</button>
                    </div>
                    <!-- Fade indicator for scroll -->
                    <div class="absolute right-0 top-0 bottom-2 w-8 bg-gradient-to-l from-gray-50 to-transparent pointer-events-none md:hidden"></div>
                </div>

                <!-- Dynamic Content Area -->
                <div id="matrix-content" class="grid md:grid-cols-2 gap-6 min-h-[400px]">
                    <!-- Left: Conventional (JS Populated) -->
                    <div class="bg-white rounded-xl p-5 md:p-8 shadow-sm border border-gray-200 card-hover transition-all">
                        <div class="flex items-center gap-3 mb-4">
                            <span class="bg-gray-100 text-gray-600 p-2 rounded-lg text-lg">ğŸ“‰</span>
                            <h3 class="text-lg font-bold text-gray-800">å¾“æ¥ã®åˆ°é”ç‚¹</h3>
                        </div>
                        <div id="conventional-content" class="prose prose-sm text-gray-600 overflow-x-auto">
                            <!-- Content goes here -->
                        </div>
                        <div class="mt-6 pt-4 border-t border-gray-100">
                            <h4 class="text-[10px] md:text-xs font-bold text-red-500 uppercase tracking-wide mb-2">æ§‹é€ çš„é™ç•Œ (The Limit)</h4>
                            <p id="limit-content" class="text-xs md:text-sm text-gray-700 font-medium bg-red-50 p-3 rounded-lg border border-red-100">
                                <!-- Limit content goes here -->
                            </p>
                        </div>
                    </div>

                    <!-- Right: Prime OS (JS Populated) -->
                    <div class="bg-teal-50 rounded-xl p-5 md:p-8 shadow-md border border-teal-100 card-hover transition-all relative overflow-hidden flex flex-col">
                        <div class="absolute top-0 right-0 w-24 h-24 bg-teal-100 rounded-bl-full -mr-12 -mt-12 opacity-50"></div>
                        <div class="flex items-center gap-3 mb-4 relative z-10">
                            <span class="bg-teal-200 text-teal-800 p-2 rounded-lg text-lg">ğŸš€</span>
                            <h3 class="text-lg font-bold text-teal-900">ç´ æ•°è¨ˆç®—OSã®çªç ´ç‚¹</h3>
                        </div>
                        <div id="os-content" class="prose prose-sm text-gray-700 relative z-10 flex-grow overflow-x-auto">
                            <!-- Content goes here -->
                        </div>
                        <div class="mt-8 relative z-10 flex flex-col sm:flex-row items-center justify-between border-t border-teal-100 pt-4 gap-3">
                            <div class="inline-flex items-center gap-2 text-xs font-bold text-teal-700 bg-white px-3 py-1 rounded-full border border-teal-200 shadow-sm whitespace-nowrap">
                                <span class="w-2 h-2 rounded-full bg-teal-500 animate-pulse"></span>
                                Paradigm Shift
                            </div>
                            <a href="https://ghostdrifttheory.github.io/prime-counter-demo/" target="_blank" class="text-teal-700 hover:text-teal-900 text-sm font-bold flex items-center gap-1 group whitespace-nowrap">
                                Try Live Demo 
                                <span class="group-hover:translate-x-1 transition-transform">&rarr;</span>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Literature List Section -->
        <section id="references" class="py-12 bg-white">
            <div class="max-w-6xl mx-auto px-4">
                <div class="flex flex-col md:flex-row md:items-center justify-between mb-6 gap-4">
                    <div>
                        <h2 class="text-xl md:text-2xl font-bold text-gray-900 serif flex items-center gap-2">
                            <span class="bg-gray-100 w-8 h-8 rounded-full flex items-center justify-center text-sm font-sans">C</span>
                            å‚è€ƒæ–‡çŒ®ãƒªã‚¹ãƒˆ
                        </h2>
                        <p class="text-xs text-gray-500 mt-1 pl-10">è«–æ‹ ã¨ãªã‚‹ä¸»è¦ãªè«–æ–‡ (2020â€“2025)</p>
                    </div>
                    
                    <!-- Filters (Scrollable on mobile) -->
                    <div class="overflow-x-auto pb-2 -mx-4 px-4 md:mx-0 md:px-0 no-scrollbar">
                        <div class="flex gap-2 whitespace-nowrap">
                            <button onclick="filterRefs('all')" class="px-3 py-1 text-xs font-medium rounded-full bg-gray-800 text-white transition hover:bg-gray-700">All</button>
                            <button onclick="filterRefs('explicit')" class="px-3 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-600 transition hover:bg-gray-200">æ˜ç¤ºå…¬å¼</button>
                            <button onclick="filterRefs('intervals')" class="px-3 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-600 transition hover:bg-gray-200">çŸ­åŒºé–“</button>
                            <button onclick="filterRefs('zeros')" class="px-3 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-600 transition hover:bg-gray-200">é›¶ç‚¹ãƒ»RH</button>
                            <button onclick="filterRefs('computation')" class="px-3 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-600 transition hover:bg-gray-200">è¨ˆç®—</button>
                        </div>
                    </div>
                </div>

                <div id="ref-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 md:gap-4">
                    <!-- References populated by JS -->
                </div>
            </div>
        </section>
    </main>

    <footer class="bg-gray-900 text-gray-400 py-8 border-t border-gray-800 text-center">
        <div class="max-w-6xl mx-auto px-4">
            <p class="serif text-lg text-gray-200 mb-2">ç´ æ•°è¨ˆç®—OS</p>
            <p class="text-xs mb-4">From Explicit Formulae to Finite Closure</p>
            <p class="text-[10px] text-gray-600">&copy; 2025 Research Report Visualization.</p>
        </div>
    </footer>

    <!-- JavaScript Logic -->
    <script>
        // --- Data Storage ---
        
        const matrixData = {
            explicit: {
                title: "â‘  æ˜ç¤ºå…¬å¼ã¨èª¤å·®è©•ä¾¡",
                conventional: `
                    <p class="mb-2 text-sm"><strong class="text-gray-900">Fiori et al. (2023), Johnston-Yang (2023)</strong></p>
                    <p class="text-sm">æœ€é©åŒ–ã•ã‚ŒãŸãƒ†ã‚¹ãƒˆé–¢æ•°ã«ã‚ˆã‚Šã€Chebyshevé–¢æ•° $\\psi(x)-x$ ã®èª¤å·®ã‚’ $10^{-15}x$ ç´šã¾ã§åœ§ç¸®ã™ã‚‹ã“ã¨ã«æˆåŠŸ [2][3]ã€‚è§£æçš„æ‰‹æ³•ã¨ã—ã¦ã¯æ¥µè‡´ã«é”ã—ã¦ã„ã‚‹ã€‚</p>
                `,
                limit: "ç„¡é™å’Œã®æ®‹å­˜ï¼šç„¡é™å€‹ã®é›¶ç‚¹å¯„ä¸ã‚’ä¸ç­‰å¼ã§æŠ‘ãˆè¾¼ã‚€ã®ã¿ã§ã‚ã‚Šã€æœ‰é™å›ã®è¨ˆç®—ã§â€œå®Œå…¨ãªç­‰å·â€ã¾ã§ã¯åˆ°é”ã§ããªã„ã€‚",
                os: `
                    <p class="mb-2 text-sm"><strong class="text-teal-900">æœ‰é™é–‰åŒ… (Finite Closure)</strong></p>
                    <p class="text-sm">Yukawaçª“é–¢æ•°ã«ã‚ˆã‚Šç„¡é™é ã®å¯„ä¸ã‚’æœ‰é™å€‹ã®æœ‰ç†ãƒã‚¦ãƒ³ãƒ‰ã«æŠ¼ã—è¾¼ã¿ã€å®Ÿè³ªçš„ã«ã‚«ãƒƒãƒˆã‚ªãƒ•ã™ã‚‹ã€‚è¿‘ä¼¼å€¤ã§ã¯ãªãã€æœ‰é™åŒºé–“ã«ã¤ã„ã¦æœ‰é™å€‹ã®é …ã¨ $\\Sigma_1$ ä¸ç­‰å¼ã§ç®¡ç†å¯èƒ½ãªå½¢ã«è½ã¨ã—è¾¼ã‚€ã€‚</p>
                `
            },
            intervals: {
                title: "â‘¡ çŸ­åŒºé–“ãƒ»å¹³å‡å€¤",
                conventional: `
                    <p class="mb-2 text-sm"><strong class="text-gray-900">Cully-Hugill et al. (2022-2025)</strong></p>
                    <p class="text-sm">$n^{155}$ åŒºé–“ã§ã®ç´ æ•°å­˜åœ¨ä¿è¨¼ã‚„ã€çŸ­åŒºé–“ç´ æ•°å®šç†ã®æ˜ç¤ºçš„å¹³å‡å€¤è©•ä¾¡ã‚’é”æˆ [4][5]ã€‚BDHå®šç†ã®ä¸€èˆ¬åŒ–ã‚‚é€²å±•ã€‚</p>
                `,
                limit: "æ¼¸è¿‘çš„ãƒ»ç¢ºç‡çš„ä¿è¨¼ï¼šã€Œååˆ†å¤§ããªxã€ã‚„ã€Œå¹³å‡çš„æŒ™å‹•ã€ã«ä¾å­˜ã—ã€å±€æ‰€çš„ãƒ»æ±ºå®šè«–çš„ãªæ•°ãˆä¸Šã’ã«ã¯ä¸å‘ãã€‚",
                os: `
                    <p class="mb-2 text-sm"><strong class="text-teal-900">å±€æ‰€çš„æ±ºå®šæ€§ (Certificate)</strong></p>
                    <p class="text-sm">æœ‰é™çª“å†…ã§ã®æ±ºå®šè«–çš„è¨ˆä¸Šã€‚ç¢ºç‡ã‚„ã€Œååˆ†å¤§ããªã€æ¡ä»¶ã«ä¾å­˜ã—ãªã„ã€ã€Œå°å¸³ã€ã¨ã—ã¦ã®ç´ æ•°å‡¦ç†ã€‚</p>
                `
            },
            zeros: {
                title: "â‘¢ Î¶é–¢æ•°é›¶ç‚¹ãƒ»RH",
                conventional: `
                    <p class="mb-2 text-sm"><strong class="text-gray-900">Platt-Trudgian (2021), Bellotti (2024)</strong></p>
                    <p class="text-sm">é«˜ã• $3\\cdot 10^{12}$ ã¾ã§ã®RHæ¤œè¨¼ [10]ã€æ–°ãŸãªé›¶ç‚¹éå­˜åœ¨åŸŸã®æ˜ç¤ºåŒ– [17]ã€é›¶ç‚¹å¯†åº¦ã®ç²¾å¯†åŒ– [14]ã€‚</p>
                `,
                limit: "è¨ˆç®—çˆ†ç™ºã¨éå­˜åœ¨ã®è¨¼æ˜ï¼šé›¶ç‚¹å€‹æ•°N(T)ã®è¨ˆç®—ã‚³ã‚¹ãƒˆãŒå¢—å¤§ã€‚ã€Œãã“ã«é›¶ç‚¹ãŒãªã„ã“ã¨ã€ã®è¨¼æ˜ã«ç•™ã¾ã‚‹ã€‚",
                os: `
                    <p class="mb-2 text-sm"><strong class="text-teal-900">ã‚¹ãƒšã‚¯ãƒˆãƒ«ã¨ã—ã¦ã®é›¶ç‚¹æ“ä½œ</strong></p>
                    <p class="text-sm">é›¶ç‚¹ã‚’ã€Œæ’é™¤ã™ã¹ãèª¤å·®ã€ã§ã¯ãªãã€æœ‰é™çª“ã‚’æ§‹æˆã™ã‚‹ã€Œä¿¡å·ï¼ˆã‚¹ãƒšã‚¯ãƒˆãƒ«ï¼‰ã€ã¨ã—ã¦ç›´æ¥åˆ©ç”¨ãƒ»åˆæˆã™ã‚‹ã€‚</p>
                `
            },
            computation: {
                title: "â‘£ Ï€(x) è¨ˆç®—å®Ÿè£…",
                conventional: `
                    <p class="mb-2 text-sm"><strong class="text-gray-900">Walisch (2022), BÃ¼the et al. (2018)</strong></p>
                    <p class="text-sm">è§£æçš„æ‰‹æ³•ã®æ”¹è‰¯ã¨è¨ˆç®—æœ€é©åŒ–ã«ã‚ˆã‚Šã€$\\pi(10^{29})$ ã®è¨ˆç®—ã‚’é”æˆ [8][9]ã€‚ä¸–ç•Œè¨˜éŒ²ã®æ›´æ–°ã€‚</p>
                `,
                limit: "çµ„åˆã›çˆ†ç™ºï¼šæœ¬è³ªçš„ã«çµ„åˆã›è«–çš„ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã§ã‚ã‚Šã€è¨ˆç®—é‡ã¯ $x$ ã«ä¾å­˜ã—ã¦å¢—å¤§ ($O(x^{2/3})$)ã€‚",
                os: `
                    <p class="mb-2 text-sm"><strong class="text-teal-900">O(1) Query ã¸ã®æŒ‘æˆ¦</strong></p>
                    <p class="text-sm">æœ‰é™é–‰åŒ…ã•ã‚ŒãŸæ˜ç¤ºå…¬å¼ã«ã‚ˆã‚‹ã€è¨ˆç®—é‡ãŒå¯¾è±¡ $x$ ã®å¤§ãã•ã«ä¾å­˜ã—ãªã„å®šæ•°æ™‚é–“å‚ç…§ã®æ¨¡ç´¢ã€‚</p>
                `
            },
            unconditional: {
                title: "â‘¤ éRHä¾å­˜è©•ä¾¡",
                conventional: `
                    <p class="mb-2 text-sm"><strong class="text-gray-900">Dusart (2018), Axler (2024)</strong></p>
                    <p class="text-sm">RHã‚’ä»®å®šã—ãªã„ $\\pi(x), p_n$ ã®æœ€è‰¯è©•ä¾¡ã€‚æ¼¸è¿‘å±•é–‹ã®ä¿‚æ•°ç²¾å¯†åŒ–ã‚’å®Ÿæ–½ [20][21]ã€‚</p>
                `,
                limit: "å¢ƒç•Œã®ç·©ã•ï¼šRHéä»®å®šã‚†ãˆã«èª¤å·®é …ã®ã‚ªãƒ¼ãƒ€ãƒ¼ãŒå¤§ããã€å®Ÿç”¨çš„ãªç²¾å¯†è¨ˆç®—ã«ã¯è€ãˆãªã„ã€‚",
                os: `
                    <p class="mb-2 text-sm"><strong class="text-teal-900">RHéä¾å­˜ã®æ§‹é€ åŒ–</strong></p>
                    <p class="text-sm">æœ‰é™é–‰åŒ…ã®æ çµ„ã¿è‡ªä½“ã¯ã€RHã®çœŸå½ã«é–¢ã‚ã‚‰ãšæ•°ç†ç‰©ç†çš„ã«æˆç«‹ã™ã‚‹æ§‹é€ ã‚’æŒã¤ã€‚</p>
                `
            }
        };

        const references = [
            { id: "[1]", text: "Broadbent et al., Sharper Bounds for Î¸(x), arXiv:2002.11068 (2020)", tag: "explicit" },
            { id: "[2]", text: "Fiori et al., Sharper bounds for Ïˆ(x), arXiv:2204.02588 (2023)", tag: "explicit" },
            { id: "[3]", text: "Johnston & Yang, Estimates for error in PNT, arXiv:2204.01980 (2022/23)", tag: "explicit" },
            { id: "[4]", text: "Languascoâ€“Moree, Explicit bounds on primes (2025 preprint)", tag: "intervals" },
            { id: "[5]", text: "Cully-Hugill, Primes between consecutive powers (2023)", tag: "intervals" },
            { id: "[6]", text: "Cully-Hugill & Lee, Explicit interval estimates (2022)", tag: "intervals" },
            { id: "[7]", text: "Cully-Hugill & Dudek, Mean-value estimate for PNT (2024)", tag: "intervals" },
            { id: "[8]", text: "Prime Counting Function â€“ Wolfram MathWorld (2023)", tag: "computation" },
            { id: "[9]", text: "BÃ¼the et al., Analytic method for Ï€(x) (2018)", tag: "computation" },
            { id: "[10]", text: "Platt & Trudgian, RH is true up to 3Â·10^12 (2021)", tag: "zeros" },
            { id: "[11]", text: "Brent et al., Estimation of sums over zeros of Î¶(s) (2021)", tag: "zeros" },
            { id: "[12]", text: "Hasanalizade, Counting zeros of Riemann zeta (2022)", tag: "zeros" },
            { id: "[13]", text: "Bennett et al., Counting zeros of Dirichlet L-functions (2021)", tag: "zeros" },
            { id: "[14]", text: "Chourasiya & SimoniÄ, Inghamâ€™s zero density estimate (2023)", tag: "zeros" },
            { id: "[15]", text: "SimoniÄ, Zero density estimate near critical line (2020)", tag: "zeros" },
            { id: "[16]", text: "Patel, Explicit upper bound for |Î¶(1+it)| (2022)", tag: "zeros" },
            { id: "[17]", text: "Bellotti, New zero-free region (2024)", tag: "zeros" },
            { id: "[18]", text: "MathOverflow, Explicit zero-free regions (2023)", tag: "zeros" },
            { id: "[19]", text: "Dona et al., Explicit L^2 bounds for Riemann Î¶ (2022)", tag: "zeros" },
            { id: "[20]", text: "Dusart, Explicit estimates over primes (2018)", tag: "unconditional" },
            { id: "[21]", text: "Axler, New estimates for Ï€(x) (2018)", tag: "unconditional" }
        ];

        // --- State Management ---
        let currentChartMode = 'classic'; // 'classic' or 'os'
        let currentTermCount = 50;
        let chartInstance = null;

        // --- Core Interaction Handling ---

        function init() {
            // Render initial matrix tab
            switchTab('explicit');
            
            // Render references
            renderReferences(references);

            // Init Chart
            initChart();
        }

        // Matrix Tab Switching
        function switchTab(key) {
            // Update Tab UI
            document.querySelectorAll('#tab-container button').forEach(btn => {
                if(btn.id === `tab-${key}`) {
                    btn.classList.remove('inactive-tab', 'text-gray-500');
                    btn.classList.add('active-tab');
                    // Scroll active tab into view on mobile
                    btn.scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
                } else {
                    btn.classList.remove('active-tab');
                    btn.classList.add('inactive-tab');
                }
            });

            // Update Content with animation
            const leftPanel = document.getElementById('conventional-content');
            const limitPanel = document.getElementById('limit-content');
            const rightPanel = document.getElementById('os-content');
            const data = matrixData[key];

            // Replace [1], [2] etc with interactive links
            const replaceRefLinks = (text) => {
                return text.replace(/\[(\d+)\]/g, (match, id) => {
                    return `<button onclick="scrollToRef('${id}')" class="text-teal-600 font-bold hover:underline cursor-pointer" title="å‚è€ƒæ–‡çŒ®[${id}]ã¸">[${id}]</button>`;
                });
            };

            // Simple fade effect
            const animateUpdate = (el, html) => {
                el.style.opacity = '0';
                setTimeout(() => {
                    el.innerHTML = replaceRefLinks(html);
                    el.style.opacity = '1';
                    // Trigger MathJax typeset if needed
                    if (window.MathJax) {
                        MathJax.typesetPromise([el]);
                    }
                }, 150);
            };

            animateUpdate(leftPanel, data.conventional);
            animateUpdate(limitPanel, data.limit);
            animateUpdate(rightPanel, data.os);
        }

        function scrollToRef(id) {
            // Ensure All tab is active so the ref is visible
            filterRefs('all');
            
            setTimeout(() => {
                const el = document.getElementById(`ref-${id}`);
                if (el) {
                    el.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    // Trigger animation
                    el.classList.remove('highlight-ref');
                    void el.offsetWidth; // trigger reflow
                    el.classList.add('highlight-ref');
                }
            }, 50); // Small delay to allow filter rendering
        }

        // Chart Logic
        function initChart() {
            const ctx = document.getElementById('conceptChart').getContext('2d');
            
            chartInstance = new Chart(ctx, {
                type: 'line',
                data: generateChartData(currentChartMode, currentTermCount),
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    animation: { duration: 800 },
                    interaction: { mode: 'index', intersect: false },
                    plugins: {
                        legend: { display: true, position: 'top', labels: { boxWidth: 10, font: { size: 10 } } },
                        tooltip: {
                            callbacks: {
                                label: function(context) {
                                    return context.dataset.label + ': ' + context.parsed.y.toFixed(2);
                                }
                            }
                        }
                    },
                    scales: {
                        x: { 
                            display: true, 
                            title: { display: true, text: 'Space (t)', font: { size: 10 } },
                            grid: { display: false },
                            ticks: { font: { size: 10 } }
                        },
                        y: { 
                            display: true, 
                            min: -2, max: 2,
                            grid: { color: '#E5E7EB' },
                            ticks: { font: { size: 10 } }
                        }
                    }
                }
            });
        }

        function setChartMode(mode) {
            currentChartMode = mode;
            
            // Update Buttons
            const btnClassic = document.getElementById('btn-mode-classic');
            const btnOs = document.getElementById('btn-mode-os');
            const caption = document.getElementById('chart-caption');

            if (mode === 'classic') {
                btnClassic.classList.remove('bg-white', 'text-gray-500');
                btnClassic.classList.add('bg-gray-100', 'text-gray-800');
                btnOs.classList.remove('bg-teal-50', 'text-teal-800', 'font-bold');
                btnOs.classList.add('text-gray-500');
                caption.textContent = "å¾“æ¥ã®æ˜ç¤ºå…¬å¼ï¼šç„¡é™é ã®ãƒã‚¤ã‚ºãŒæ®‹ç•™ã™ã‚‹ (è¿‘ä¼¼)";
                caption.classList.remove('text-teal-700');
                caption.classList.add('text-gray-700');
            } else {
                btnOs.classList.remove('bg-white', 'text-gray-500');
                btnOs.classList.add('bg-teal-50', 'text-teal-800', 'font-bold');
                btnClassic.classList.remove('bg-gray-100', 'text-gray-800');
                btnClassic.classList.add('text-gray-500');
                caption.textContent = "ç´ æ•°è¨ˆç®—OSï¼šçª“ã®å¤–å´ã®å¯„ä¸ãŒå®Ÿè³ªã‚¼ãƒ­ã¾ã§æŠ‘åˆ¶ã•ã‚Œã‚‹ (æœ‰é™é–‰åŒ…)";
                caption.classList.remove('text-gray-700');
                caption.classList.add('text-teal-700');
            }

            updateChart();
        }

        function updateChartTerms(val) {
            currentTermCount = parseInt(val);
            document.getElementById('term-count-display').innerText = val + "é …";
            updateChart();
        }

        function updateChart() {
            const newData = generateChartData(currentChartMode, currentTermCount);
            chartInstance.data = newData;
            chartInstance.update();
        }

        // Simulating the mathematical concept:
        // Classic: Sum of sin(kt) -> converges slowly, noisy tail.
        // OS: (Sum of sin(kt)) * Window(t) -> converges fast, zero tail.
        function generateChartData(mode, terms) {
            const labels = [];
            const dataPoints = [];
            
            const steps = 100;
            const range = 10; // -5 to 5
            
            for (let i = 0; i <= steps; i++) {
                const t = (i / steps) * range - (range / 2); // -5 to 5
                labels.push(t.toFixed(1));

                // Simulate Prime Distribution Signal (Sum of Sines)
                let val = 0;
                // Add "terms" number of frequencies (simulating zeros)
                for (let k = 1; k <= terms; k++) {
                    // Use prime-like frequencies (log p) simulation
                    // Just pseudo-random but deterministic frequencies for visual effect
                    const freq = k * 0.5; 
                    const phase = k * 0.2;
                    // Amplitude decays slightly to simulate explicit formula terms x^rho/rho
                    const amp = 1 / k; 
                    val += Math.sin(freq * t + phase) * amp;
                }
                
                // Scale for visibility
                val = val * 2;

                if (mode === 'os') {
                    // Apply Yukawa/Gaussian Window
                    // Window width approx -2 to 2
                    const window = Math.exp(-(t * t) / 2); 
                    val = val * window;
                    dataPoints.push(val);
                } else {
                    // Classic: Just the raw noisy sum
                    dataPoints.push(val);
                }
            }

            const dataset = {
                label: mode === 'classic' ? 'æ˜ç¤ºå…¬å¼ (è¿‘ä¼¼å’Œ)' : 'æœ‰é™é–‰åŒ… (çª“é–¢æ•°é©ç”¨)',
                data: dataPoints,
                borderColor: mode === 'classic' ? '#4B5563' : '#0F766E', // Gray vs Teal
                backgroundColor: mode === 'classic' ? 'rgba(75, 85, 99, 0.1)' : 'rgba(15, 118, 110, 0.1)',
                borderWidth: 2,
                tension: 0.4,
                pointRadius: 0,
                fill: true
            };

            // Add a "Bounds" dataset for Classic mode to visualize error
            const datasets = [dataset];
            if (mode === 'classic') {
                const errorBound = 0.5 * (10 / terms); // Error shrinks as terms increase
                datasets.push({
                    label: 'èª¤å·®å¢ƒç•Œ (Bounds)',
                    data: dataPoints.map(v => v + errorBound), // Mock upper bound
                    borderColor: 'rgba(239, 68, 68, 0.3)', // Red
                    borderWidth: 1,
                    borderDash: [5, 5],
                    pointRadius: 0,
                    fill: false
                });
                datasets.push({
                    label: 'èª¤å·®å¢ƒç•Œ (Bounds)',
                    data: dataPoints.map(v => v - errorBound), // Mock lower bound
                    borderColor: 'rgba(239, 68, 68, 0.3)',
                    borderWidth: 1,
                    borderDash: [5, 5],
                    pointRadius: 0,
                    fill: false,
                    hidden: true // Hide form legend to avoid clutter
                });
            }

            return { labels, datasets };
        }

        // Reference Logic
        function renderReferences(list) {
            const container = document.getElementById('ref-grid');
            container.innerHTML = '';
            
            list.forEach(ref => {
                const div = document.createElement('div');
                // Extract clean ID number for creating HTML id
                const cleanId = ref.id.replace(/[\[\]]/g, '');
                div.id = `ref-${cleanId}`;
                div.className = "bg-white p-3 md:p-4 rounded-lg border border-gray-100 shadow-sm text-xs text-gray-600 hover:border-teal-200 transition-all duration-300";
                
                // Highlight the ID visually
                const content = ref.text.replace(/^(\[\d+\])/, '<span class="font-bold text-teal-700 bg-teal-50 px-1.5 py-0.5 rounded mr-1 text-[10px] md:text-sm">$1</span>');
                div.innerHTML = content;
                container.appendChild(div);
            });
            // Typeset MathJax in references
            if (window.MathJax) {
                MathJax.typesetPromise([container]);
            }
        }

        function filterRefs(tag) {
            // Update filter buttons UI
            const buttons = document.querySelectorAll('#references button');
            buttons.forEach(btn => {
                if (btn.textContent.trim() === 'All' && tag === 'all') {
                     btn.className = "px-3 py-1 text-xs font-medium rounded-full bg-gray-800 text-white transition hover:bg-gray-700 flex-shrink-0";
                } else if (btn.getAttribute('onclick').includes(tag) && tag !== 'all') {
                     btn.className = "px-3 py-1 text-xs font-medium rounded-full bg-gray-800 text-white transition hover:bg-gray-700 flex-shrink-0";
                } else {
                     btn.className = "px-3 py-1 text-xs font-medium rounded-full bg-gray-100 text-gray-600 transition hover:bg-gray-200 flex-shrink-0";
                }
            });

            if (tag === 'all') {
                renderReferences(references);
            } else {
                const filtered = references.filter(r => r.tag === tag);
                renderReferences(filtered);
            }
        }

        // Initialize on load
        window.addEventListener('load', init);

    </script>
</body>
</html>